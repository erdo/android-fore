// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
    repositories {
        jcenter()
        mavenCentral()
        google()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.0.0'
        classpath 'com.github.dcendents:android-maven-gradle-plugin:1.5'
        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.4'
    }
}

apply plugin: 'idea'


//read in passwords file
def secrets = new Properties()
def secretsFile = new File('secrets.properties')
if (secretsFile.canRead()) {
    secrets.load(new FileInputStream(secretsFile))
} else {
    println 'WARNING secrets.properties not found! \n'
}
def AWS_ACCESS_KEY = System.getenv("AWS_ACCESS_KEY") ?: secrets.AWS_ACCESS_KEY
def AWS_SECRET_KEY = System.getenv("AWS_SECRET_KEY") ?: secrets.AWS_SECRET_KEY



allprojects {
    repositories {
        jcenter()
        mavenCentral()
        google()

        maven {
            url "s3://com.ixpocket.repo.s3.eu-west-2.amazonaws.com/snapshots"
            //url "s3://com.ixpocket.repo.s3.eu-west-2.amazonaws.com/releases"
            credentials(AwsCredentials) {
                accessKey AWS_ACCESS_KEY
                secretKey AWS_SECRET_KEY
            }
        }

        maven {
            url  "https://dl.bintray.com/erdo/asaf"
        }
    }
}

ext {
    minSdkVersion = 16
    compileSdkVersion = 26
    targetSdkVersion = 23
    buildToolsVersion = "26.0.2"
    supportLibVersion = "26.0.1"
    javaVersion = JavaVersion.VERSION_1_8

    LIB_VERSION_NAME="0.9.19"
    LIB_VERSION_CODE=16

    REPO="asaf"
    LIB_GROUP="co.early.asaf"
    PROJ_NAME="ASAF"
    LIB_DEVELOPER_ID="erdo"
    LIB_DEVELOPER_NAME="E Donovan"
    LIB_DEVELOPER_EMAIL="eric@early.co"
    POM_PACKAGING="aar"
    POM_URL="https://erdo.github.io/asaf-project/"
    POM_SCM_URL="https://github.com/erdo/asaf-project"
    POM_SCM_CONNECTION="scm:git@github.com:erdo/asaf-project.git"
    POM_SCM_DEV_CONNECTION="scm:git@github.com:erdo/asaf-project.git"

    LICENCE_SHORT_NAME="Apache-2.0"
    LICENCE_NAME="The Apache Software License, Version 2.0"
    LICENCE_URL="http://www.apache.org/licenses/LICENSE-2.0.txt"

    exampleAsafLibVersion="0.9.11-SNAPSHOT"

    BINTRAY_USER = System.getenv("BINTRAY_USER") ?: secrets.BINTRAY_USER
    BINTRAY_API_KEY = System.getenv("BINTRAY_API_KEY") ?: secrets.BINTRAY_API_KEY
}

task clean(type: Delete) {
    delete rootProject.buildDir
}
